/*!
 * TrilloJS v1.0.0 (https://github.com/trillo/trillojs-spring-boot#readme)
 * Copyright 2016 Collager Inc.
 * Licensed under the MIT license
 */
ToDo={},ToDo.ListModel=Trillo.Model.extend({initialize:function(a,b){this._super(a,b)},loadData:function(){var a=$.Deferred();return $.ajax({url:"/taskList",type:"get",datatype:"application/json"}).done($.proxy(this.dataLoaded,this,a)),a.promise()},dataLoaded:function(a,b){this.data=b,a.resolve(this)},newTaskAdded:function(a){this.data.push(a),this.triggerAdded(a)}}),ToDo.ToDoListC=Trillo.Controller.extend({initialize:function(a){this._super(a)},handleAction:function(a,b,c){return"newTask"===a?(this.showView({name:"NewTaskForm",impl:"Trillo.FormView",postUrl:"/newTask",type:Trillo.ViewType.Form,container:"trillo-dialog-container",modelSpec:{data:{priority:"P1"}}}),!0):this._super(a,b,c)},afterPost:function(a,b){if(this.showResult(a),"NewTaskForm"===b.name&&"success"===a.status){var c=a.props.task;this.model().newTaskAdded(c)}},fieldChanged:function(a,b,c,d,e){var f=this;"completed"===a&&$.ajax({url:"/updateCompleted?uid="+e.uid+"&completed="+b,type:"get",datatype:"application/json"}).done(function(a){f.showResult(a)})}});